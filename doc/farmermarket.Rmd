---
title: "farmer market getdata"
output: html_document
---

```{r}
library(xlsx)
```

```{r}
farmer <- read.xlsx("../data/farmer_markets.dxy.xlsx",1)
names(farmer) <- c("Name","Address","Zipcode")
#make farmer address organized
farmer$Address <- paste0(farmer$Address,", New York, NY")
```

```{r}
library(ggmap)
for(i in 1:nrow(farmer))
{
  result <- geocode(farmer$Address[i], output = "latlona", source = c("google", "dsk"))
  farmer$Longitude[i] <- as.numeric(result[1])
  farmer$Latitude[i] <- as.numeric(result[2])
}
#repeat below codes several times until get all longitude and latitude data
# na <- unique(c(which(is.na(farmer$Latitude)),which(is.na(farmer$Longitude))))
# for(i in na){
#   result <- geocode(farmer$Address[i], output = "latlona", source = c("google", "dsk"))
#   farmer$Longitude[i] <- as.numeric(result[1])
#   farmer$Latitude[i] <- as.numeric(result[2])
# }
```

```{r}
#output as csv
write.csv(farmer,"farmer.dxy.csv")
```
